{"version":3,"sources":["../../src/pages/img-flow/img-flow.module.ts","../../src/pages/img-flow/img-flow.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ImgFlowPage } from './img-flow';\nimport {PreviewPicturePageModule} from \"../../shared/preview-picture/preview-picture.module\";\n\n@NgModule({\n  declarations: [\n    ImgFlowPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ImgFlowPage)\n  ],\n})\nexport class ImgFlowPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/img-flow/img-flow.module.ts","import {Component} from '@angular/core';\nimport {IonicPage, NavController, NavParams, ModalController} from 'ionic-angular';\n\n/**\n * Generated class for the ImgFlowPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n    selector: 'page-img-flow',\n    templateUrl: 'img-flow.html',\n})\nexport class ImgFlowPage {\n    img_data = [{\n        id: \"1\",\n        src: \"assets/img/1.jpg\"\n    }, {\n        id: \"2\",\n        src: \"assets/img/2.jpg\"\n    }, {\n        id: \"3\",\n        src: \"assets/img/3.jpg\"\n    }, {\n        id: \"4\",\n        src: \"assets/img/4.jpg\"\n    }, {\n        id: \"5\",\n        src: \"assets/img/5.jpg\"\n    }, {\n        id: \"6\",\n        src: \"assets/img/6.jpg\"\n    }, {\n        id: \"7\",\n        src: \"assets/img/7.jpg\"\n    }, {\n        id: \"8\",\n        src: \"assets/img/8.jpg\"\n    }, {\n        id: \"9\",\n        src: \"assets/img/9.jpg\"\n    }, {\n        id: \"10\",\n        src: \"assets/img/10.jpg\"\n    }, {\n        id: \"11\",\n        src: \"assets/img/11.jpg\"\n    }, {\n        id: \"12\",\n        src: \"assets/img/12.jpg\"\n    }, {\n        id: \"13\",\n        src: \"assets/img/13.jpg\"\n    }, {\n        id: \"14\",\n        src: \"assets/img/14.jpg\"\n    }, {\n        id: \"15\",\n        src: \"assets/img/15.jpg\"\n    }];\n\n    constructor(public navCtrl: NavController,\n                public navParams: NavParams,\n                private modalCtrl: ModalController) {\n\n    }\n\n    ionViewDidLoad() {\n        console.log('ionViewDidLoad ImgFlowPage');\n    }\n\n    ngAfterViewInit() {\n\n    }\n\n    ionViewWillEnter() {\n        this.getNode();\n    }\n\n    getNode() {\n        let parentNode = document.getElementById(\"container\");\n        let childNodeArray: any = parentNode.getElementsByClassName(\"box\");\n        let screenWidth = document.documentElement.clientWidth;\n        let childWidth = childNodeArray[0].offsetWidth;\n        let num = Math.floor(screenWidth / childWidth); //获得一排摆的个数 用Math.floor()转换为整数\n        parentNode.style.cssText = \"width:\" + childWidth * num + \"px; margin:0 auto\"; //固定container的宽并设置居中\n        this.setImagePosition(num, childNodeArray);\n    }\n\n    setImagePosition(num, childArray) {\n        var imgHeightArray = [];//定义数组用于存放所有图片的高度\n        for (var i = 0; i < childArray.length; i++) { //遍历所有图片\n            if (i < num) {\n                imgHeightArray[i] = childArray[i].offsetHeight; //取得第一排图片的高度\n            } else {\n                var minHeight = Math.min.apply(null, imgHeightArray); //获取第一排图片中高度最小的图片\n                var minIndex = this.getMinHeight(imgHeightArray, minHeight); //函数获得高度最小的图片的位置\n                childArray[i].style.position = \"absolute\"; //绝对定位图片\n                childArray[i].style.top = minHeight + \"px\"; //图片距顶部像素\n                childArray[i].style.left = childArray[minIndex].offsetLeft + \"px\"; //图片距左的像素\n                imgHeightArray[minIndex] = imgHeightArray[minIndex] + childArray[i].offsetHeight; //将最低高度的box的高度加上它下方的box高度\n            }\n        }\n    }\n\n    getMinHeight(imgHeightArray, minHeight) {\n        for (var i in imgHeightArray) {\n            if (imgHeightArray[i] == minHeight) { //循环所有数组的高度 让它等于最小图片的高度 返回i值\n                return i;\n            }\n        }\n    }\n\n    //这里是借助ionic的上拉加载代替网页的滚动监听实现加载更多\n    doInfinite(infiniteScroll) {\n        let parentNode = document.getElementById(\"container\");\n        for (var i = 0; i < this.img_data.length; i++) {\n            let divNode = document.createElement(\"div\"); //创建div节点\n            divNode.className = \"box\";//为节点添加box类名\n            parentNode.appendChild(divNode);//添加根元素\n            let subDivNode = document.createElement(\"div\");//创建节点\n            subDivNode.className = \"box_img\";//为节点添加类名\n            divNode.appendChild(subDivNode);//添加根元素\n            var img = document.createElement(\"img\");//创建节点\n            img.src = this.img_data[i].src;//图片加载路径\n            subDivNode.appendChild(img);//添加根元素\n        }\n        this.getNode();\n        setTimeout(() => { infiniteScroll.complete() }, 1000);\n    }\n\n    viewerPicture(index) {//照片预览\n        let picturePaths = [];\n        for (let img of this.img_data) {\n            picturePaths.push(img.src);\n        }\n        //懒加载 ViewerPicPage Swiper（照片预览）\n        this.modalCtrl.create('preview-picture', {'initialSlide': index, 'picturePaths': picturePaths}).present();\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/img-flow/img-flow.ts"],"sourceRoot":""}